% --------------------------------
% This file contains a custom set
% of commands to make writing
% LaTeX easier
% --------------------------------

% makes 0.05 inches of horizontal space
\newcommand{\vertspace}{\vspace{0.05in}}

% writes centered italic text 80% width of the page/column and gives top & bottom padding
\newcommand{\question}[1]{\vertspace\begin{center}\parbox{0.8\linewidth}{\centering\textit{#1}}\end{center}\vertspace}

% Writes a single paragraph of Lorum Ipsum text
\newcommand{\lorem}{Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam eget tortor a urna ornare pellentesque. Integer sit amet purus nec sem iaculis euismod. Duis at ipsum eu libero pharetra egestas. Quisque eleifend odio velit, at sollicitudin metus dictum eu. Integer nec mi congue, gravida nibh sed, faucibus mauris. Sed vel ipsum lobortis felis gravida dignissim. Curabitur vestibulum turpis eu orci lacinia consectetur.}

% APA style qoutes
\usepackage{xstring}
\newcommand{\qoute}[3]{%
  % Count the number of words in the quote
  \StrCount{#1}{ }[\woordenaantal]%
  \ifthenelse{\woordenaantal < 39}{``\textit{#1}'' (\citeauthor{#2}, \citeyear{#2}, p. #3)}% Kort citaat (minder dan 40 woorden)
  {
    \vertspace
    \begin{flushright}
      \parbox{0.95\linewidth}{\textit{#1}}
      (\citeauthor{#2}, \citeyear{#2}, p. #3)
    \end{flushright}
    \vertspace % Lang citaat (40 woorden of meer)
  }
}

% cites like \parencite[prenote][postnote]{cite}
\newcommand{\parencite}[3][]{%
    (#1 \citeauthor{#3}, \citeyear{#3}#2)%
}



% command for Editor's notes and comments
% defines custom commands:
% - \editorsonly{...} for inline comments
% - \begin{editorsonlyBox} ... \end{editorsonlyBox} for boxed comments
% - \editorsfootnote{...} for comments in footnotes
\ifthenelse{\boolean{editorsversion}}{%
    % EDITORS VERSION
    % inline red comments - compact, no paragraph indentation
    \newcommand{\editorsonly}[1]{%
        \par\vspace{0.05in}
        {\footnotesize\noindent\textcolor{red!70!black}{\textbf{Editor's note:} #1}}%
        \par\vspace{0.05in}
    }

    % environment for soft-background editor comments
    \newenvironment{editorsonlyBox}{%
        \par\medskip
        \begin{tcolorbox}[
            enhanced,
            breakable,
            colback=red!5,
            colframe=red!20!white,
            boxrule=0pt,
            borderline north={1pt}{0pt}{red!40!white},
            sharp corners,
            before skip=6pt,
            after skip=6pt,
            title={\textcolor{red!60!black}{\footnotesize Comment for editors:}},
            coltitle=red!70!black,
            fonttitle=\bfseries,
            top=2pt,
            bottom=2pt,
            left=4pt,
            right=4pt
        ]
    }{%
        \end{tcolorbox}
    }

    % red footnotes for editors
    \newcommand{\editorsfootnote}[1]{%
        \textcolor{red!70!black}{\footnote{\textcolor{red!70!black}{Editor's note: #1}}}%
    }

    % command to cite all references in the .bib file (for editors only)
    \nocite{*}
}{%
% STUDENT VERSION: suppress all editor content
    \newcommand{\editorsonly}[1]{\ignorespaces}
    \newenvironment{editorsonlyBox}{\comment}{\uncomment}
    \newcommand{\editorsfootnote}[1]{}
}

%%% ---------- TEXT SPLITTER ----------
%    The \splittext{<text>}{<n>} command splits <text> into lines of maximum <n> characters.
%    It inserts a line break (\\) every n characters.
%
%    Example usage:
%    \splittext{This is an example of splitting text into multiple lines every n characters.}{10}
%
%    This will produce:

\ExplSyntaxOn
\NewDocumentCommand{\spliteveryn}{mm}
 {
  % #1 = number of characters per line
  % #2 = text to split
  \str_set:Nn \l_tmpa_str { #2 }
  \int_zero:N \l_tmpa_int
  \str_map_inline:Nn \l_tmpa_str
   {
       ##1
       \int_incr:N \l_tmpa_int
       \int_compare:nNnT { \l_tmpa_int } = { #1 }
           {
           \\
           \int_zero:N \l_tmpa_int
       }
   }
 }
\ExplSyntaxOff

% --- Helper macro to check if argument is empty ---
\makeatletter
\newcommand{\IfNonEmpty}[2]{%
    \if\relax\detokenize{#1}\relax
    % empty → do nothing
    \else
    #2%
    \fi
}
\makeatother


% Usage:
%    % 2 columns
%    \begin{SimpleTable}[<alignment>]{Caption}{label}
%        \TableHeader{Col1 & Col2}
%        \TableRow{Data1 & Data2}
%        \TableRow{Data3 & Data4}
%    \end{SimpleTable}
%
%    % 3 columns
%    \begin{SimpleTable}[<alignment>]{Caption}{label}
%        \TableHeader{Col1 & Col2 & Col3}
%        \TableRow{Data1 & Data2 & Data3}
%        \TableRow{Data4 & Data5 & Data6}
%    \end{SimpleTable}
%
%    % 4 columns
%    \begin{SimpleTable}[<alignment>]{Caption}{label}
%        \TableHeader{Col1 & Col2 & Col3 & Col4}
%        \TableRow{Data1 & Data2 & Data3 & Data4}
%        \TableRow{Data5 & Data6 & Data7 & Data8}
%    \end{SimpleTable}
%
% [<alignment>] → required, e.g. s{0.5}s{0.5} for 2 equal columns, amount of s{} defines relative width and you need as much s{} as columns
% <caption> / <label> → optional (use {} to skip)
% ======================================================
\newcolumntype{s}[1]{>{\hsize=#1\hsize\relax\arraybackslash}X}

\ExplSyntaxOn
\NewExpandableDocumentCommand{\GenerateColumns}{m}
{
    \clist_set:Nn \l_tmpa_clist { #1 }
    \clist_use:Nn \l_tmpa_clist { ~s }
    % OR simpler:
    % \clist_map_inline:Nn \l_tmpa_clist { s{##1} }
}
\ExplSyntaxOff

\NewEnviron{SimpleTable}[3][1,1]{%
    \begin{table}[h]
        \centering
        \scalefont{0.75}
        \begin{tabularx}{\columnwidth}{#1}
            \BODY
            \arrayrulecolor{black!80}\specialrule{1pt}{0pt}{0pt}\arrayrulecolor{black}
        \end{tabularx}
        \IfNonEmpty{#2}{\caption{#2}}%
        \IfNonEmpty{#3}{\label{#3}}%
    \end{table}
}

% Table header command - just bold the content manually
\NewDocumentCommand{\TableHeader}{>{\SplitArgument{5}{&}}m}{%
    \tableheaderaux#1%
}

\NewDocumentCommand{\tableheaderaux}{mmmmmm}{%
    \IfValueT{#1}{\textbf{#1}}%
    \IfValueT{#2}{& \textbf{#2}}%
    \IfValueT{#3}{& \textbf{#3}}%
    \IfValueT{#4}{& \textbf{#4}}%
    \IfValueT{#5}{& \textbf{#5}}%
    \IfValueT{#6}{& \textbf{#6}}%
    \\ \arrayrulecolor{black!80}\specialrule{1pt}{0pt}{0pt}\arrayrulecolor{black}
}

% Table row command
\NewDocumentCommand{\TableRow}{>{\SplitArgument{5}{&}}m}{%
    \tablerowaux#1%
}

\NewDocumentCommand{\tablerowaux}{mmmmmm}{%
    \IfValueT{#1}{#1}%
    \IfValueT{#2}{& #2}%
    \IfValueT{#3}{& #3}%
    \IfValueT{#4}{& #4}%
    \IfValueT{#5}{& #5}%
    \IfValueT{#6}{& #6}%
    \\ \arrayrulecolor{black!10}\specialrule{0.5pt}{1pt}{0pt}\arrayrulecolor{black}
}

% empty row - just bold the content manually
\NewDocumentCommand{\TableEmpty}{}{\\}